<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>mozhenghong</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="mozhenghong">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="mozhenghong">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mozhenghong">
  
    <link rel="alternate" href="/atom.xml" title="mozhenghong" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">mozhenghong</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-DOM事件模型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/17/DOM事件模型/" class="article-date">
  <time datetime="2018-12-17T15:53:10.000Z" itemprop="datePublished">2018-12-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/17/DOM事件模型/">DOM事件模型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="onclick和addEventListener"><a href="#onclick和addEventListener" class="headerlink" title="onclick和addEventListener"></a>onclick和addEventListener</h3><ol>
<li>关于onclick</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function print()&#123;&#125;</span><br><span class="line">&lt;button id=&quot;x&quot; onclick=&quot;print&quot;&gt;A&lt;/button&gt;//错误</span><br><span class="line">&lt;button id=&quot;y&quot; onclick=&quot;print()&quot;&gt;B&lt;/button&gt;//正确</span><br><span class="line">x.onclick = print//正确</span><br><span class="line">x.onclick = print()//错误</span><br></pre></td></tr></table></figure>
<ul>
<li>不能同时添加多个onclick事件，后面添加的会覆盖前面添加的<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x.onclick = function()&#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">&#125;</span><br><span class="line">x.onclick = function()&#123;</span><br><span class="line">    console.log(2)</span><br><span class="line">&#125;</span><br><span class="line">//最终点击ｘ时会打印出２，因为后一次会覆盖前一次</span><br></pre></td></tr></table></figure>
</li>
</ul>
<ol start="2">
<li>关于addEventListener</li>
</ol>
<ul>
<li>后一次添加的事件不会覆盖前一次的，会加到前一后面，也就是说可以给同一元素添加多个click事件,每添加一个, 都会进入click的队列里, 然后依次执行,每种事件有各自不同的队列</li>
<li>removeEventListener<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">x.addEventListener(&apos;click&apos;,function()&#123;</span><br><span class="line">    console.log(1)</span><br><span class="line">&#125;)</span><br><span class="line">x.addEventListener(&apos;click&apos;,function()&#123;</span><br><span class="line">    console.log(2)</span><br><span class="line">&#125;)</span><br><span class="line">//会依次打印出１和２</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="事件捕获和事件冒泡"><a href="#事件捕获和事件冒泡" class="headerlink" title="事件捕获和事件冒泡"></a>事件捕获和事件冒泡</h2><ul>
<li>有以下一段html内容：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;grand&quot;&gt;</span><br><span class="line">爷爷</span><br><span class="line">    &lt;div id=&quot;parent&quot;&gt;</span><br><span class="line">    爸爸</span><br><span class="line">        &lt;div id=&quot;son&quot;&gt;</span><br><span class="line">        儿子</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">//script</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    grand.addEventListener(&apos;click&apos;,function f1()&#123;&#125;,第三个参数)</span><br><span class="line">    parent.addEventListener(&apos;click&apos;,function f2()&#123;&#125;,第三个参数)</span><br><span class="line">    son.addEventListener(&apos;click&apos;,function f3()&#123;&#125;,第三个参数)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>当点击儿子时，f1,f2,f3都会被调用</li>
<li>若第三个参数为true，则调用顺序为f1,f2,f3 ==&gt;事件捕获</li>
<li>若第三个参数不填或者第三个　参数为五个falsy值中的一个，则调用顺序为f3,f2,f1 ==&gt;事件冒泡</li>
<li>一般情况下为先捕获再冒泡</li>
<li>特例：若儿子有两个click事件，一个为true(捕获)，一个为false(冒泡)，当点击儿子时，儿子上的函数执行顺序会按书写顺序执行，并不会再遵循先捕获再冒泡的规则。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">son.addEventListener(&apos;click&apos;,function f3()&#123;&#125;)</span><br><span class="line">son.addEventListener(&apos;click&apos;,function f4()&#123;&#125;,true)</span><br><span class="line">son.addEventListener(&apos;click&apos;,function f5()&#123;&#125;,true)</span><br><span class="line">点击son时，会依次执行f3,f4,f5</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/17/DOM事件模型/" data-id="cjptrq8k70002eh3qxzcx6z0c" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JSONP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/17/JSONP/" class="article-date">
  <time datetime="2018-12-17T15:52:40.000Z" itemprop="datePublished">2018-12-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/17/JSONP/">JSONP</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="局部刷新"><a href="#局部刷新" class="headerlink" title="局部刷新"></a>局部刷新</h2><ol>
<li>用<code>&lt;img&gt;</code>来造get请求</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(&apos;click&apos;, (e)=&gt;&#123;</span><br><span class="line">    let image = document.createElement(&apos;img&apos;)</span><br><span class="line">    image.src = &apos;/pay&apos;</span><br><span class="line">    image.onload = function()&#123; // 状态码是 200~299 则表示成功</span><br><span class="line">        alert(&apos;成功&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">    image.onerror = function()&#123; // 状态码大于等于 400 则表示失败</span><br><span class="line">        alert(&apos;失败&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>用<code>&lt;script&gt;</code>来造get请求</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(&apos;click&apos;, (e)=&gt;&#123;</span><br><span class="line">    let script = document.createElement(&apos;script&apos;)</span><br><span class="line">    script.src = &apos;/pay&apos;</span><br><span class="line">    document.body.appendChild(script)//必须加到html中才可以！！！</span><br><span class="line">    script.onload = function(e)&#123; // 状态码是 200~299 则表示成功</span><br><span class="line">        e.currentTarget.remove()</span><br><span class="line">    &#125;</span><br><span class="line">    script.onerror = function(e)&#123; // 状态码大于等于 400 则表示失败</span><br><span class="line">        e.currentTarget.remove()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h2><ul>
<li><p>JSONP就是动态创建<code>&lt;script&gt;</code>标签，’src‘指向get请求的’url‘，同时传入一个callback查询参数，然后可以处理获取到的数据。</p>
</li>
<li><p>请求方：momo.com的前端程序员（浏览器）</p>
</li>
<li>响应方：wenwen.com的后端程序员（服务器）</li>
</ul>
<ol>
<li>请求方创建 script，src 指向响应方，同时传一个查询参数 ?callbackName=yyy</li>
<li>响应方根据查询参数callbackName，构造形如<ul>
<li>yyy.call(undefined, ‘你要的数据’)</li>
<li>yyy(‘你要的数据’)<br><br>这样的响应</li>
</ul>
</li>
<li>浏览器接收到响应，就会执行 yyy.call(undefined, ‘你要的数据’)</li>
<li>那么请求方就知道了他要的数据</li>
</ol>
<ul>
<li>用JSONP做请求<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">button.addEventListener(&apos;click&apos;, (e)=&gt;&#123;</span><br><span class="line">    let script = document.createElement(&apos;script&apos;)</span><br><span class="line">    let functionName = &apos;momo&apos;+ parseInt(Math.random()*10000000 ,10)</span><br><span class="line">    window[functionName] = function()&#123;  // 每次请求之前搞出一个随机的函数</span><br><span class="line">        amount.innerText = amount.innerText - 0 - 1</span><br><span class="line">    &#125;</span><br><span class="line">    script.src = &apos;/pay?callback=&apos; + functionName</span><br><span class="line">    document.body.appendChild(script)</span><br><span class="line">    script.onload = function(e)&#123; // 状态码是 200~299 则表示成功</span><br><span class="line">        e.currentTarget.remove()</span><br><span class="line">        delete window[functionName] // 请求完了就干掉这个随机函数</span><br><span class="line">    &#125;</span><br><span class="line">    script.onerror = function(e)&#123; // 状态码大于等于 400 则表示失败</span><br><span class="line">        e.currentTarget.remove()</span><br><span class="line">        delete window[functionName] // 请求完了就干掉这个随机函数</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>后端代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">if (path === &apos;/pay&apos;)&#123;</span><br><span class="line">    let amount = fs.readFileSync(&apos;./db&apos;, &apos;utf8&apos;)</span><br><span class="line">    amount -= 1</span><br><span class="line">    fs.writeFileSync(&apos;./db&apos;, amount)</span><br><span class="line">    let callbackName = query.callback</span><br><span class="line">    response.setHeader(&apos;Content-Type&apos;, &apos;application/javascript&apos;)</span><br><span class="line">    response.write(`</span><br><span class="line">        $&#123;callbackName&#125;.call(undefined, &apos;success&apos;)</span><br><span class="line">    `)</span><br><span class="line">    response.end()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>jQuery中的JSONP<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> $.ajax(&#123;</span><br><span class="line">   url: &quot;http://wenwen.com:8002/pay&quot;,//响应方</span><br><span class="line">   dataType: &quot;jsonp&quot;,</span><br><span class="line">   success: function( response ) &#123;</span><br><span class="line">       if(response === &apos;success&apos;)&#123;</span><br><span class="line">       amount.innerText = amount.innerText - 1</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="JSONP为什么不支持POST请求"><a href="#JSONP为什么不支持POST请求" class="headerlink" title="JSONP为什么不支持POST请求"></a>JSONP为什么不支持POST请求</h3><ul>
<li>JSONP是通过动态创建<code>&lt;script&gt;</code>标签实现的，<br>动态创建的<code>&lt;script&gt;</code>只能发get请求，不能发post请求</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/17/JSONP/" data-id="cjptrq8ke0006eh3q4skmbvp4" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-AJAX" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/12/17/AJAX/" class="article-date">
  <time datetime="2018-12-17T15:50:10.000Z" itemprop="datePublished">2018-12-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/12/17/AJAX/">AJAX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="发请求的方式"><a href="#发请求的方式" class="headerlink" title="发请求的方式"></a>发请求的方式</h2><ol>
<li><code>&lt;form method=&#39;GET/POST&#39;&gt;</code>，但是会刷新页面或者新开页面</li>
<li><code>&lt;a href=&quot; &quot;&gt;</code>,可以发送get请求，也会刷新页面或者新开页面</li>
<li><code>&lt;img src=&quot; &quot;&gt;</code>,可以发送get请求，但是只能以图片形式展示</li>
<li><code>&lt;link href=&quot; &quot;&gt;</code>,可以发送get请求，只能以 CSS、favicon 的形式展示</li>
<li><code>&lt;script src=&quot; &quot;&gt;</code>,可以发送get请求，但是只能以脚本形式运行</li>
</ol>
<h2 id="AJAX"><a href="#AJAX" class="headerlink" title="AJAX"></a>AJAX</h2><ul>
<li>async javascript and XML(异步的javascript 和XML)</li>
</ul>
<ol>
<li>使用XMLHttpRequest发请求</li>
<li>服务器返回XML格式的字符串</li>
<li>js解析XML,并更新局部页面</li>
</ol>
<h2 id="JSON"><a href="#JSON" class="headerlink" title="JSON"></a>JSON</h2><ul>
<li><a href="http://json.org/" target="_blank" rel="noopener">官方网址</a></li>
<li>JSON是一门新语言,与JS类似</li>
<li><p>JSON与JS的不同：</p>
<ul>
<li>JSON中没有function、undefined以及symbol，其余的几种数据类型都有</li>
<li>JSON的字符串首尾必须是双引号“”</li>
<li>JSON的对象没有原型链</li>
<li>JSON的对象的书写格式：<code>{&quot;name&quot;:&quot;momo&quot;}</code></li>
</ul>
</li>
</ul>
<p>##　同源策略</p>
<ul>
<li>如果JS不是baidu.com页面中的，就不能向baidu.com发送AJAX请求，<font color="red">只有协议＋端口＋域名一模一样才允许发送AJAX请求</font><ul>
<li><code>http://baidu.com</code>不能向<code>http://www.baidu.com</code>发送AJAX请求</li>
<li><code>http://baidu.com:80</code>不能向<code>http://baidu.com:81</code>发送AJAX请求</li>
</ul>
</li>
</ul>
<h2 id="CORS跨域-gt-突破同源策略"><a href="#CORS跨域-gt-突破同源策略" class="headerlink" title="CORS跨域=&gt;突破同源策略"></a>CORS跨域=&gt;突破同源策略</h2><ul>
<li>Cross-Origin Resource Sharing</li>
<li>CORS可以告诉浏览器，我俩是一家的，别阻止它</li>
<li>只要在后端代码中添加<code>response.setHeader(&#39;Access-Control-Allow-Origin&#39;,&#39;url&#39;)</code>即可,后端代码：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">if(path===&apos;/xxx&apos;)&#123;</span><br><span class="line"> response.statusCode = 200</span><br><span class="line"> response.setHeader(&apos;Content-Type&apos;, &apos;text/json;charset=utf-8&apos;)</span><br><span class="line"> response.setHeader(&apos;Access-Control-Allow-Origin&apos;, &apos;http://momo.com:8001&apos;)</span><br><span class="line"> response.write(`</span><br><span class="line"> &#123;</span><br><span class="line">   &quot;note&quot;:&#123;</span><br><span class="line">     &quot;to&quot;: &quot;xiaowen&quot;,</span><br><span class="line">     &quot;from&quot;: &quot;momo&quot;,</span><br><span class="line">     &quot;heading&quot;: &quot;打招呼&quot;,</span><br><span class="line">     &quot;content&quot;: &quot;hello&quot;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br><span class="line"> `) //write()中写入的是字符串！</span><br><span class="line"> response.end()　//一定要加</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="使用原生JS写一个AJAX请求"><a href="#使用原生JS写一个AJAX请求" class="headerlink" title="使用原生JS写一个AJAX请求"></a>使用原生JS写一个AJAX请求</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">let request = new XMLHttpRequest();</span><br><span class="line">request.open(&apos;GET/POST&apos;,&apos;URL&apos;);</span><br><span class="line">request.onreadystatechange = ()=&gt;&#123;</span><br><span class="line">    if(request.readyState===4)&#123;</span><br><span class="line">        //说明都响应完了</span><br><span class="line">        if(request.status&gt;=200&amp;&amp;request.status&lt;300)&#123;</span><br><span class="line">            //说明请求成功了</span><br><span class="line"></span><br><span class="line">            let string = request.responseText</span><br><span class="line">            //把符合JSON语法的字符串</span><br><span class="line">            //转化成JS对应的值</span><br><span class="line">            let object = window.JSON.parse(string)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">request.send();</span><br></pre></td></tr></table></figure>
<h2 id="AJAX的所有功能"><a href="#AJAX的所有功能" class="headerlink" title="AJAX的所有功能"></a>AJAX的所有功能</h2><ul>
<li>客户端的JS发送请求（浏览器上的）</li>
<li>服务端的JS发送响应（Ｎode.js上的）</li>
<li>JS 可以设置任意请求 header :<ul>
<li>第一部分 request.open(‘get’, ‘/xxx’)</li>
<li>第二部分 request.setRequestHeader(‘content-type’,’x-www-form-urlencoded’)</li>
<li>第四部分 request.send(‘a=1&amp;b=2’)</li>
</ul>
</li>
<li>JS 可以获取任意响应 header :<ul>
<li>第一部分 request.status //200<br> request.statusText//ok</li>
<li>第二部分 request.getResponseHeader(‘content-type’) / request.getAllResponseHeaders()</li>
<li>第四部分 request.responseText</li>
</ul>
</li>
</ul>
<h2 id="自己实现AJAX"><a href="#自己实现AJAX" class="headerlink" title="自己实现AJAX"></a>自己实现AJAX</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">window.jQuery.ajax=function(&#123;url,method,body,headers&#125;)&#123;</span><br><span class="line">    //成功就调用 resolve，失败就调用 reject</span><br><span class="line">    return new Promise(function(resolve,reject)&#123;</span><br><span class="line">        let request = new XMLHttpRequest()</span><br><span class="line">        request.open(&apos;method&apos;,&apos;url&apos;)//配置request</span><br><span class="line">        for(key in headers)&#123;</span><br><span class="line">            let value = headers[key]</span><br><span class="line">            request.setRequestHeader(key,value)</span><br><span class="line">        &#125;</span><br><span class="line">        request.onreadystatechange = ()=&gt;&#123;</span><br><span class="line">            if(request.readyState===4)&#123;</span><br><span class="line">                if(request.status&gt;=200&amp;&amp;request.status&lt;300)&#123;</span><br><span class="line">                    resolve.call(undefined,request.responseText)</span><br><span class="line">                &#125;else if(request.status&gt;=400)&#123;</span><br><span class="line">                    reject.call(undefined,request)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        request.send(body)</span><br><span class="line"></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//使用AJAX</span><br><span class="line">button.addEventListener(&apos;click&apos;,(e)=&gt;&#123;</span><br><span class="line">    let promise = window.jQuery.ajax(&#123;</span><br><span class="line">        url:&apos;/xxx&apos;,</span><br><span class="line">        method: &apos;get&apos;,</span><br><span class="line">        headers:&#123;</span><br><span class="line">            &apos;content-type&apos;:&apos;application/x-www-form-urlencoded&apos;,</span><br><span class="line">            &apos;age&apos;: &apos;18&apos;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    promise.then(</span><br><span class="line">        (text)=&gt;&#123;console.log(text)&#125;,</span><br><span class="line">        (request)=&gt;&#123;console.log(request)&#125;</span><br><span class="line">    )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">//=&gt;链式操作</span><br><span class="line">window.jQuery.ajax().then(success, fail).then(success, fail)</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/12/17/AJAX/" data-id="cjptrq8ki0009eh3qd2qn1lth" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-for循环中的闭包" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/27/for循环中的闭包/" class="article-date">
  <time datetime="2018-11-27T06:07:29.000Z" itemprop="datePublished">2018-11-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/27/for循环中的闭包/">for循环中的闭包</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>问题</li>
</ol>
<ul>
<li>以下代码中原本是想每次点击对应的目标弹出对应的数字下标0-9，但实际上无论点击哪个目标都会弹出数字10.<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;ie=edge&quot;&gt;</span><br><span class="line">    &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;div class=&quot;parent&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;0&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;1&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;2&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;3&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;4&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;5&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;6&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;7&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;8&lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;child&quot;&gt;9&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;script&gt;</span><br><span class="line">       var childArray= document.getElementsByClassName(&apos;child&apos;)</span><br><span class="line">       for(var i=0;i&lt;childArray.length;i++)&#123;</span><br><span class="line">           childArray[i].onclick=function()&#123;</span><br><span class="line">               console.log(i)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<font color="blue">上面代码中，当执行onclick事件时循环已经结束了，这时打印的i是外部定义的i，此时i=10（变量i和这个函数形成了闭包）</font>

<ol start="2">
<li><p>解决方法</p>
<ul>
<li><p>方案1：将var改为let</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let childArray = document.getElementsByClassName(&apos;child&apos;);</span><br><span class="line">    for (let i = 0; i &lt; childArray.length; i++) &#123;</span><br><span class="line">        childArray[i].onclick = function () &#123;</span><br><span class="line">            console.log(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>let定义的变量作用域为块级作用域，只在{}中有效。</p>
</li>
<li><p>方案2：增加闭包</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> for(var i=0;i&lt;childArray.length;i++)&#123;</span><br><span class="line">    childArray[i].onclick = function () &#123;</span><br><span class="line">                var copy = i;</span><br><span class="line">                return function () &#123;</span><br><span class="line">                    console.log(copy);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>方案3：立即执行函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(var i=0;i&lt;childArray.length;i++)&#123;</span><br><span class="line">(function () &#123;</span><br><span class="line">            var copy = i;</span><br><span class="line">            childArray[i].onclick = function () &#123;</span><br><span class="line">                console.log(copy);</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;)();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码每执行一次，就会产生一个对象存储copy和onclick函数</p>
</li>
<li>方案4:与方案3相似<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">for(var i=0;i&lt;childArray.length;i++)&#123;</span><br><span class="line">    (function (arg) &#123;</span><br><span class="line">    childArray[i].onclick = function () &#123;</span><br><span class="line">        console.log(arg);</span><br><span class="line">    &#125;;</span><br><span class="line">    &#125;)(i);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/27/for循环中的闭包/" data-id="cjptrq8ku000ieh3qcu7d56ei" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-DOM" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/22/DOM/" class="article-date">
  <time datetime="2018-11-22T02:47:04.000Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/22/DOM/">DOM</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><ul>
<li><font color="blue">DOM是一棵树（tree），树上有Node，</font>Node 分为 Document（html）、Element（元素）和 Text（文本），以及其他不重要的。</li>
<li>DOM中的O指的是Object,他是在内存中,按照树型结构,通过构造函数(如Node,Element(翻译为标签比较好),Document三个构造函数),构造出对象,将 DOM 展现到内存中。</li>
<li>DOM树形结构如下，其中<font color="blue">每个节点(包括矩形节点和椭圆形节点)都是Node类型！</font></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-a5ee96193393ef7b.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li><p>document节点是Document构造函数的一个实例对象,document节点代表了整个文档(整个树型结构,我们可以通过直接输入<code>document</code>来获取document节点;html节点是Element构造函数的一个实例对象,html节点又叫根节点我们可以通过输入<code>document.documentElement</code>来获得html节点;<br>椭圆形的文本节点:”请输入文字” 是Text构造函数的一个实例对象(文本节点是Text构造函数的一个实例对象)</p>
</li>
<li><p>Node Element Text 的关系如下图所示：</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-dfadc5bdd4e4ebf6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h2 id="Node类型的一些属性和方法"><a href="#Node类型的一些属性和方法" class="headerlink" title="Node类型的一些属性和方法"></a>Node类型的一些属性和方法</h2><h3 id="Node属性"><a href="#Node属性" class="headerlink" title="Node属性"></a>Node属性</h3><ol>
<li><p>节点本身某些特征的属性:</p>
<ul>
<li>Node.nodeName:<ul>
<li>看着DOM,如果你不确定某个Node节点是什么类型(不确定某个Node节点是矩形还是椭圆形)，例如document.body.nodeName//‘BODY’</li>
<li>返回节点类型,返回的值是大写的HTML元素名, 只有’svg’返回小写。</li>
</ul>
</li>
<li>Node.nodeType:<ul>
<li>根据Node类型返回某些数字</li>
<li>Element类型,返回的数字是1</li>
<li>Text类型,返回的数字是3</li>
<li>Document类型,返回的数字的9</li>
</ul>
</li>
<li>Node.textContent<ul>
<li>返回当前节点及其所有后代的文本内容</li>
<li>值得注意的是,因为Node.textContent是Node属性,所以文本节点也是有textContent的，innerHTML和innerText是Element的属性,所以TextNode.innerHTML返回的是undefined,注意,并不是返回null</li>
<li>innerText也会返回当前节点及其所有后代的文本内容，但是会跳过script和style！</li>
</ul>
</li>
</ul>
</li>
<li><p>节点结构关系属性</p>
<ul>
<li>兄弟关系<ul>
<li>Node.nextSibling</li>
<li>Node.previousSibling</li>
<li>以上两个属性可能会获取到空格（text节点）</li>
</ul>
</li>
<li>儿子关系<ul>
<li>Node.childNodes（返回的是一个伪数组,里面是Node节点,并且伪数组内的值是动态变化的）</li>
<li>Node.firstChild</li>
<li>Node.lastChild</li>
</ul>
</li>
<li>父关系<ul>
<li>Node.parentNode</li>
</ul>
</li>
</ul>
</li>
</ol>
<h3 id="Node-方法"><a href="#Node-方法" class="headerlink" title="Node 方法"></a>Node 方法</h3><ul>
<li><p>Node.appendChild()</p>
</li>
<li><p>Node.hasChildNodes()</p>
<ul>
<li>返回true或false</li>
</ul>
</li>
<li><p>Node.cloneNode()</p>
<ul>
<li>（）中是什么也没有，或者值为false，则为浅拷贝，只拷贝当前节点</li>
<li>（）中值为true，则为深拷贝，会拷贝节点和节点中的所有内容 </li>
</ul>
</li>
<li><p>Node.insertBefore()</p>
</li>
<li><p>Node.removeChild()</p>
</li>
<li><p>Node.replaceChild()</p>
</li>
<li><p>Node.contains()</p>
</li>
<li><p>Node.isEqualNode()</p>
<ul>
<li>判断两个节点是否是相同的节点</li>
</ul>
</li>
<li><p>Node.isSameNode()<br>  -判断两个节点是否为同一个节点，类似于严格相等 </p>
</li>
<li><p>Node.normalize()</p>
<ul>
<li>使常规化 </li>
</ul>
</li>
</ul>
<h2 id="document节点的一些属性和方法"><a href="#document节点的一些属性和方法" class="headerlink" title="document节点的一些属性和方法"></a>document节点的一些属性和方法</h2><h3 id="document属性"><a href="#document属性" class="headerlink" title="document属性"></a>document属性</h3><ol>
<li><p>用于指向其他节点(快捷获取某些特殊节点)的属性</p>
<ul>
<li>document.documentElement指向 DOM 的 html节点</li>
<li>document.activeElement指向获得焦点的那个节点</li>
</ul>
</li>
<li><p>返回文档特定元素的伪数组集合的属性</p>
<ul>
<li>document.links<ul>
<li>返回所有a标签</li>
</ul>
</li>
<li>document.forms</li>
<li>document.images</li>
<li>document.embeds</li>
</ul>
</li>
<li>返回文档信息的属性<ul>
<li>document.location</li>
<li>document.readyState返回的是当前文档的状态,</li>
</ul>
</li>
</ol>
<h3 id="document方法"><a href="#document方法" class="headerlink" title="document方法"></a>document方法</h3><ol>
<li><p>获取节点</p>
<ul>
<li>document.querySelector(AAAA)<ul>
<li>返回的是第一个符合CSS选择器AAAA条件的节点 </li>
<li>除了是 document ,还可以是某个 Node 节点</li>
</ul>
</li>
<li>document.querySelectorAll(AAAA)<ul>
<li>除了是 document ,还可以是某个 Node 节点 </li>
<li>返回的是伪数组,里面包含了所有符合选择器的节点 </li>
<li>返回的结果不是动态的,不会实时反映元素节点的变化</li>
</ul>
</li>
<li>document.getElementById()</li>
<li>document.getElementsByClassName()</li>
<li>document.getElementsByName()<ul>
<li>通过name属性获取节点 </li>
</ul>
</li>
<li>document.getElementsByTagName()</li>
</ul>
</li>
<li><p>生成节点</p>
<ul>
<li>document.createElement(“div”)生成Element节点，也就是div标签</li>
<li>document.createTextNode(“你好”)生成Text节点</li>
</ul>
</li>
<li><p>添加节点</p>
<ul>
<li>xxx.appendChild（’div’）<ul>
<li>给id为xxx的元素添加div标签</li>
<li>也可以添加文本节点</li>
</ul>
</li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/22/DOM/" data-id="cjptrq8kb0004eh3qm7otoawt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS函数" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/21/JS函数/" class="article-date">
  <time datetime="2018-11-21T02:14:52.000Z" itemprop="datePublished">2018-11-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/21/JS函数/">函数</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="函数的5种声明"><a href="#函数的5种声明" class="headerlink" title="函数的5种声明"></a>函数的5种声明</h2><ol>
<li><p>具名函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function f(x,y)&#123;</span><br><span class="line">    return x+y</span><br><span class="line">&#125;</span><br><span class="line">f.name // &apos;f&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>匿名函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var f</span><br><span class="line">f = function(x,y)&#123;</span><br><span class="line">    return x+y</span><br><span class="line">&#125;</span><br><span class="line">f.name // &apos;f&apos;</span><br></pre></td></tr></table></figure>
</li>
<li><p>具名函数赋值</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var f</span><br><span class="line">f = function f2(x,y)&#123; return x+y &#125;</span><br><span class="line">f.name // &apos;f2&apos;</span><br><span class="line">console.log(f2) // undefined</span><br></pre></td></tr></table></figure>
</li>
<li><p>window.Function</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var f = new Function(&apos;x&apos;,&apos;y&apos;,&apos;return x+y&apos;)</span><br><span class="line">f.name // &quot;anonymous&quot;（匿名）</span><br></pre></td></tr></table></figure>
</li>
<li><p>箭头函数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var f = (x,y) =&gt; &#123;</span><br><span class="line">    return x+y</span><br><span class="line">&#125;</span><br><span class="line">var sum = (x,y) =&gt; x+y</span><br><span class="line">var n2 = n =&gt; n*n</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h2><ul>
<li>f.call(asThis, input1,input2)<br><br>其中 asThis 会被当做 this<br><br>[input1,input2] 会被当做 arguments</li>
</ul>
<h3 id="call-apply-bind"><a href="#call-apply-bind" class="headerlink" title="call/apply/bind"></a><font color="red">call/apply/bind</font></h3><ol>
<li>call/apply<ul>
<li>改变this值</li>
<li>操作参数</li>
<li>apply可以以数组形式传值</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function print(b,c)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">print.call(&#123;a:2&#125;,&apos;hi&apos;,&apos;hello&apos;)</span><br><span class="line">print.apply(&#123;a:2&#125;,[&apos;hi&apos;,&apos;hello&apos;])</span><br><span class="line">//&#123;a:2&#125;为this，b为‘hi’，c为‘hello’</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>bind<ul>
<li>切换上下文，第一个参数传this值</li>
<li>科里化</li>
<li>返回另一个函数</li>
</ul>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function fn(b,c)&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">let curryfn = fn.bind(&#123;a:2&#125;,&apos;hi&apos;)</span><br><span class="line">curryfn(&apos;hello&apos;)</span><br><span class="line">//&#123;a:2&#125;为this，b为‘hi’，c为‘hello’</span><br></pre></td></tr></table></figure>
<h2 id="this-和arguments"><a href="#this-和arguments" class="headerlink" title="this 和arguments"></a>this 和arguments</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function f()&#123;</span><br><span class="line">    &apos;use strict&apos;//开启严格模式，才能显示出this的值，否则会显示this为Window</span><br><span class="line">    console.log(this)</span><br><span class="line">    console.log(arguments)</span><br><span class="line">    return undefined</span><br><span class="line">&#125;</span><br><span class="line">f.call(1,2,3) // this 为 1，arguments 为 [2,3]</span><br></pre></td></tr></table></figure>
<h2 id="call-stack"><a href="#call-stack" class="headerlink" title="call stack"></a>call stack</h2><p><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gYSgpewogICAgY29uc29sZS5sb2coJ2EnKQogIHJldHVybiAnYScgIAp9CgpmdW5jdGlvbiBiKCl7CiAgICBjb25zb2xlLmxvZygnYicpCiAgICByZXR1cm4gJ2InCn0KCmZ1bmN0aW9uIGMoKXsKICAgIGNvbnNvbGUubG9nKCdjJykKICAgIHJldHVybiAnYycKfQoKYS5jYWxsKCkKYi5jYWxsKCkKYy5jYWxsKCk%3D!!!" target="_blank" rel="noopener">普通调用</a></p>
<p><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gYSgpewogICAgY29uc29sZS5sb2coJ2ExJykKICAgIGIuY2FsbCgpCiAgICBjb25zb2xlLmxvZygnYTInKQogIHJldHVybiAnYScgIAp9CmZ1bmN0aW9uIGIoKXsKICAgIGNvbnNvbGUubG9nKCdiMScpCiAgICBjLmNhbGwoKQogICAgY29uc29sZS5sb2coJ2IyJykKICAgIHJldHVybiAnYicKfQpmdW5jdGlvbiBjKCl7CiAgICBjb25zb2xlLmxvZygnYycpCiAgICByZXR1cm4gJ2MnCn0KYS5jYWxsKCkKY29uc29sZS5sb2coJ2VuZCcp!!!" target="_blank" rel="noopener">嵌套调用</a></p>
<p><a href="http://latentflip.com/loupe/?code=ZnVuY3Rpb24gc3VtKG4pewogICAgaWYobj09MSl7CiAgICAgICAgcmV0dXJuIDEKICAgIH1lbHNlewogICAgICAgIHJldHVybiBuICsgc3VtLmNhbGwodW5kZWZpbmVkLCBuLTEpCiAgICB9Cn0KCnN1bS5jYWxsKHVuZGVmaW5lZCw1KQ%3D%3D!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D" target="_blank" rel="noopener">递归调用</a></p>
<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><p>拿到代码，先变量提升</p>
<ol>
<li>实例1</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var a = 1</span><br><span class="line">function f1()&#123;</span><br><span class="line">    alert(a) // 是多少</span><br><span class="line">    var a = 2</span><br><span class="line">&#125;</span><br><span class="line">f1.call()</span><br></pre></td></tr></table></figure>
<p>变量提升==&gt;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function f1()&#123;</span><br><span class="line">    var a </span><br><span class="line">    alert(a) // 是undefined</span><br><span class="line">    a = 2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li><p>实例2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var a = 1</span><br><span class="line">function f1()&#123;</span><br><span class="line">    var a = 2</span><br><span class="line">    f2.call()</span><br><span class="line">&#125;</span><br><span class="line">function f2()&#123;</span><br><span class="line">    console.log(a) // 是1，因为f2属于全局变量，f1中的var a=2是局部变量，只在f1中有效</span><br><span class="line">&#125;</span><br><span class="line">f1.call()</span><br></pre></td></tr></table></figure>
</li>
<li><p>实例3</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var liTags = document.querySelectorAll(&apos;li&apos;)</span><br><span class="line">for(var i = 0; i&lt;liTags.length; i++)&#123;</span><br><span class="line">    liTags[i].onclick = function()&#123;</span><br><span class="line">        console.log(i) // 点击第3个 li 时，打印 2 还是打印 6？==&gt;6</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><p><a href="https://zhuanlan.zhihu.com/p/22486908" target="_blank" rel="noopener">参考网站</a></p>
<ul>
<li>如果一个函数使用了它范围外的变量，那么（这个函数+这个变量）就叫做闭包</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var a=1</span><br><span class="line">function f()&#123;</span><br><span class="line">    console.log(a)</span><br><span class="line">&#125;</span><br><span class="line">f和a就组成了一个闭包</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/21/JS函数/" data-id="cjptrq8kf0007eh3q6iurn4tn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-JS数组" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/20/JS数组/" class="article-date">
  <time datetime="2018-11-20T01:31:11.000Z" itemprop="datePublished">2018-11-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/20/JS数组/">JS数组</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noopener">Array用法</a></p>
<h3 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h3><ol>
<li>Array(3)//{length:3} ,3表示length</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-a9b61fdcc747037f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="2">
<li>Array(3,3) // [3,3] ,第一个3并不表示length了</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-c122282b21cd4d22.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="3">
<li>构造函数</li>
</ol>
<ul>
<li>基本类型==&gt;Number、String、Boolean<ul>
<li>不加new，返回基本类型</li>
<li>加new，返回对象</li>
</ul>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-132d603817f9982d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>复杂类型==&gt;Array、Function<ul>
<li>不加new，返回对象</li>
<li>加new，也返回对象</li>
</ul>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-7811060a8850d0c1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<h3 id="Js中数组的本质"><a href="#Js中数组的本质" class="headerlink" title="Js中数组的本质"></a>Js中数组的本质</h3><ul>
<li>人类理解：数组就是数据的有序集合</li>
<li>JS理解：数组就是原型链中有 Array.prototype 的对象</li>
<li>伪数组<ul>
<li>有 0,1,2,3,4,5…n,length 这些 key 的对象</li>
<li>原型链中没有 Array.prototype</li>
<li>目前知道的伪数组有：<br><br>arguments 对象<br><br>document.querySelectAll(‘div’) 返回的对象</li>
</ul>
</li>
</ul>
<h2 id="数组的API"><a href="#数组的API" class="headerlink" title="数组的API"></a>数组的API</h2><ol>
<li>Array.prototype.forEach</li>
</ol>
<p>forEach() 方法对数组的每个元素执行一次提供的函数。返回值为undefined<br><br>forEach()参数必须为一个函数<br><br>函数必须有三个参数，一个为数组当前项的值（value），一个为数组当前项的索引（key），一个为数组对象本身</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-e8c7cd125f9b2e37.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ul>
<li>for…of可以遍历数组,得到value</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-db503fb1228e3fc1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol>
<li>Array.prototype.sort</li>
</ol>
<p>sort() 方法对数组的元素进行排序，并返回数组。默认排序顺序是根据字符串Unicode码点。<br></p>
<p><font color="red">sort()是这几个方法中唯一会改变原数组的方法</font><br><br>sort()有一个函数作为参数，这是用来指定按某种顺序进行排列的函数。如果省略，元素按照转换为的字符串的各个字符的Unicode位点进行排序。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-f78236beb364d19c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="3">
<li>Array.prototype.join</li>
</ol>
<p>join() 方法将一个数组（或一个类数组对象）的所有元素连接成一个字符串并返回这个字符串。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-fba21a8564d3f1bd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="4">
<li>Array.prototype.concat</li>
</ol>
<p>concat() 方法用于合并两个或多个数组。此方法不会更改现有数组，而是返回一个新数组.</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-348394b630333463.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="5">
<li>Array.prototype.toString</li>
</ol>
<p>toString() 返回一个字符串，表示指定的数组及其元素。Array对象覆盖了Object的 toString 方法。对于数组对象，toString 方法连接数组并返回一个字符串，其中包含用逗号分隔的每个数组元素。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-21580db3dc09576d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="6">
<li>Array.prototype.map</li>
</ol>
<p>map() 方法创建一个新数组，其结果是该数组中的每个元素都调用一个提供的函数后返回的结果</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-340dd88cb736c641.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="7">
<li>Array.prototype.filter</li>
</ol>
<p>filter() 方法创建一个新数组, 其包含通过所提供函数实现的测试的所有元素。 </p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-4c9d9c267ed7d86d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="8">
<li>Array.prototype.reduce</li>
</ol>
<p>reduce() 方法对累计器和数组中的每个元素（从左到右）应用一个函数，将其简化为单个值。</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-216d455abd6bd302.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="9">
<li>Array.prototype.push/Array.prototype.unshift()</li>
</ol>
<ul>
<li>push() 方法将一个或多个元素添加到数组的末尾，并<strong>返回该数组的新长度</strong>。</li>
<li>unshift()将一个或多个元素添加到数组的开头，并返回该数组的新长度。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-8b13f339c0ecc379.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="10">
<li>Array.prototype.pop/Array.prototype.shift()</li>
</ol>
<ul>
<li>pop()方法从数组中删除最后一个元素，并<strong>返回该元素的值</strong>。此方法更改数组的长度。</li>
<li>shift() 方法从数组中删除第一个元素，并返回该元素的值。此方法更改数组的长度。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-b83fa79fa9aab7dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="11">
<li>Array.prototype.includes()</li>
</ol>
<ul>
<li>用来判断一个数组是否包含一个指定的值，根据情况，如果包含则返回 true，否则返回false</li>
<li>第一个参数为需要查找的参数值，第二个参数（可选）表示从哪个位置开始查找，如果值为负数，则整个数组都会被搜索。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-5229cf3ed2d534c5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="12">
<li>Array.prototype.indexOf()</li>
</ol>
<ul>
<li>返回在数组中可以找到一个给定元素的第一个索引，如果存在，返回这个元素所在的位置；如果不存在，则返回-1.</li>
<li>相当于严格相等===去找是否存在某元素，例如两个对象值一样，但地址不一样，则不会被找到。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-c6ac59398101157e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="13">
<li>Array.prototype.lastIndexOf()</li>
</ol>
<ul>
<li>返回指定元素（也即有效的 JavaScript 值或变量）在数组中的最后一个的索引，如果不存在则返回 -1。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-a9ff01808ccb62d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="14">
<li>Array.prototype.find()</li>
</ol>
<ul>
<li>返回数组中满足提供的测试函数的第一个元素的值。否则返回 undefined。返回的是找到的值</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-cf80ed21f10b4b41.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="15">
<li>Array.prototype.findIndex()</li>
</ol>
<ul>
<li>返回数组中满足提供的测试函数的第一个元素的索引。否则返回-1。返回的是找到的值的位置。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-af07bc56cb96214a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="16">
<li>Array.prototype.some()</li>
</ol>
<ul>
<li>判断数组里是否有任意一个元素满足回调，找到了一个就不再往下执行。 </li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-01b83341271af7a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="17">
<li>Array.prototype.every()</li>
</ol>
<ul>
<li>判断数组里是否所有元素都满足回调。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-d1fdae4c086933d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="18">
<li>Array.prototype.slice()</li>
</ol>
<ul>
<li>截取数组的一部分,如下[2,3)</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-c112cf364a6afb9f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="19">
<li>Array.prototype.splice()</li>
</ol>
<ul>
<li>splice()方法通过删除现有元素和/或添加新元素来修改数组,返回被删除的内容。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-795c795e9cc8e0df.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/20/JS数组/" data-id="cjptrq8kj000aeh3qsx0ceg2e" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-原型与原型链" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/原型与原型链/" class="article-date">
  <time datetime="2018-11-13T14:18:19.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/原型与原型链/">原型与原型链</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="全局对象"><a href="#全局对象" class="headerlink" title="全局对象"></a>全局对象</h2><ul>
<li>ECMAScript 规定全局对象叫做 global，但是浏览器把 window 作为全局对象（浏览器先存在的）</li>
<li>window 就是一个哈希表，有很多属性。</li>
<li>window 的属性就是全局变量。这些全局变量分为两种：</li>
</ul>
<ol>
<li><p>ECMAScript 规定的</p>
<ul>
<li>global.parseInt()</li>
<li>global.parseFloat()</li>
<li>global.Number()</li>
<li>global.String()</li>
<li>global.Boolean()</li>
<li>global.Object()</li>
</ul>
</li>
<li><p>是浏览器自己加的属性</p>
<ul>
<li>window.alert()弹框提示</li>
<li>window.prompt()用户填写</li>
<li>window.comfirm()确认</li>
<li>window.console.log()开发者而工具打印</li>
<li>window.console.dir</li>
<li>window.document</li>
<li>window.document.createElement</li>
<li>window.document.getElementById</li>
</ul>
</li>
</ol>
<h2 id="全局函数"><a href="#全局函数" class="headerlink" title="全局函数"></a>全局函数</h2><ol>
<li>Number<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var n = new Number(1) 创建一个 Number 对象</span><br><span class="line">1 与 new Number(1) 的区别是什么？</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="https://i.loli.net/2018/11/13/5beae6fad2c5e.png" alt=""></p>
<ol start="2">
<li>String<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var str = new String(&apos;hello&apos;) 创建一个 String 对象</span><br><span class="line">&apos;hello&apos; 与 new String(&apos;hello&apos;) 的区别是什么？</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/9617841-14be71b1a6d408f0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<ol start="3">
<li>Boolean<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var b = new Boolean(false) 创建一个 Boolean 对象</span><br><span class="line">false 与 new Boolean(false) 的区别是什么？</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="https://i.loli.net/2018/11/13/5beae746e3a34.png" alt=""></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> if(b)&#123;</span><br><span class="line">     console.log(xxx)</span><br><span class="line">&#125;</span><br><span class="line">会打印出xxx，因为b为一个对象，并不是是falsy值了</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>Object<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var o1 = &#123;&#125;</span><br><span class="line">var o2 = new Object()</span><br><span class="line">o1 和 o2 没区别，但是 o1 === o2 是 false ，因为存储在 Stack(栈内存) 中的地址不同</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="公用的属性-原型"><a href="#公用的属性-原型" class="headerlink" title="公用的属性(原型)"></a>公用的属性(原型)</h2><ul>
<li>把 toString 和 valueOf 放在一个对象里（公用属性组成的对象）,<br>然后让每一个对象的 <code>__proto__</code>存储这个「公用属性组成的对象」的地址。</li>
</ul>
<h2 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h2><ul>
<li>var 对象=new 函数（）<br><font color="blue">对象.<code>__proto__</code>===函数.prototype</font>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 推论</span><br><span class="line">var number = new Number()</span><br><span class="line">number.__proto__ = Number.prototype</span><br><span class="line">Number.__proto__ = Function.prototype // 因为 Number 是 Function 的实例</span><br><span class="line"></span><br><span class="line">var object = new Object()</span><br><span class="line">object.__proto__ = Object.prototype</span><br><span class="line">Object.__proto__ = Function.prototype // 因为 Object 是 Function 的实例</span><br><span class="line"></span><br><span class="line">var function = new Function()</span><br><span class="line">function.__proto__ = Function.prototype</span><br><span class="line">Function.__proto__ == Function.prototye // 因为 Function 是 Function 的实例！</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/13/原型与原型链/" data-id="cjptrq8l1000peh3qe6stzloa" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-js里的数据类型转换" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/js里的数据类型转换/" class="article-date">
  <time datetime="2018-11-13T02:20:08.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/js里的数据类型转换/">js里的数据类型转换</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="转为字符串"><a href="#转为字符串" class="headerlink" title="转为字符串"></a>转为字符串</h2><ol>
<li>toString()<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var n=1</span><br><span class="line">n.toString()//&quot;1&quot;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><em>不可以转null和undefined</em></p>
<ol start="2">
<li><p>string（）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var n=1</span><br><span class="line">window.string(n)//&quot;1&quot;</span><br></pre></td></tr></table></figure>
<p><em>可以转null和undefined</em></p>
</li>
<li><p>+’’</p>
</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1+&apos;&apos;  //&apos;1&apos;</span><br><span class="line">null+&apos;&apos;  //&apos;null&apos;</span><br><span class="line">obj+&apos;&apos;  //&apos;[object,Object]&apos;</span><br></pre></td></tr></table></figure>
<p><em>可以转null和undefined</em></p>
<h2 id="转为Boolean"><a href="#转为Boolean" class="headerlink" title="转为Boolean"></a>转为Boolean</h2><ol>
<li><p>Boolean()</p>
<ul>
<li>falsy值：0、NaN、’’、null、undefined、false</li>
<li>Boolean（falsy值）返回false，其余返回true</li>
</ul>
</li>
<li><p>取返两次</p>
<ul>
<li>!!1  //true</li>
<li>!!null //false</li>
</ul>
</li>
</ol>
<h2 id="转为Number"><a href="#转为Number" class="headerlink" title="转为Number"></a>转为Number</h2><ol>
<li><p>Number(‘1’)===1</p>
</li>
<li><p>parseInt(‘1’,10)===1</p>
<ul>
<li>用于将字符串转化为整数，第二个参数为被解析的值的进制</li>
<li>如果字符串头部有空格，空格会被自动去除</li>
<li>如果参数不是字符串，会先转化为字符串再转化</li>
<li>字符串转为整数时，是一个一个字符依次转换，如果遇到不能转换的字符，就不再进行下去，返回已经转好的部分</li>
<li>如果字符串第一个字符不能转换为数字（+、-除外），返回NaN</li>
</ul>
</li>
<li><p>parseFloat(1.23)===1.23</p>
<ul>
<li>将一个字符串转化为浮点数</li>
<li>空字符串‘’会转化为NaN</li>
</ul>
</li>
<li><p>字符串减去0：<code>&#39;1&#39;-0</code> //1</p>
</li>
<li>取正：<code>+&#39;1&#39;</code>//1;<code>+&#39;-1&#39;</code>//-1</li>
</ol>
<h1 id="内存图"><a href="#内存图" class="headerlink" title="内存图"></a>内存图</h1><ul>
<li>买一个 8G 的内存条<br><br>操作系统开机即占用 512MB<br><br>Chrome 打开即占用 1G 内存<br><br>Chrome 各每个网页分配一定数量的内存<br><br>这些内存要分给页面渲染器、网络模块、浏览器外壳和 JS 引擎（V8引擎）<br><br>JS 引擎将内存分为代码区和数据区<br><br>我们只研究数据区,数据区分为 Stack（栈内存） 和 Heap（堆内存）<br><br><font color="red">简单类型的数据直接存在 Stack 里<br><br>复杂类型的数据是把 Heap 地址存在 Stack 里</font><br></li>
</ul>
<h2 id="实例（画图解决）"><a href="#实例（画图解决）" class="headerlink" title="实例（画图解决）"></a>实例（画图解决）</h2><ol>
<li>实例1<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var a = 1</span><br><span class="line">var b = a</span><br><span class="line">b = 2</span><br><span class="line">请问 a 显示是几？//1</span><br><span class="line">``` </span><br><span class="line">2. 实例2</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>var a = {name: ‘a’}<br>var b = a<br>b = {name: ‘b’}<br>请问现在 a.name 是多少？//‘a’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3. 实例3</span><br></pre></td></tr></table></figure></p>
<p>var a = {name: ‘a’}<br>var b = a<br>b.name = ‘b’<br>请问现在 a.name 是多少？//‘b’<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4. 实例4</span><br></pre></td></tr></table></figure></p>
<p>var a = {name: ‘a’}<br>var b = a<br>b = null<br>请问现在 a 是什么？//{name: ‘a’}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">## 深拷贝&amp;&amp;浅拷贝</span><br><span class="line">1. 深拷贝</span><br></pre></td></tr></table></figure></p>
<p>var a = 1<br>var b = a<br>b = 2 //这个时候改变 b<br>a 完全不受 b 的影响<br>那么我们就说这是一个深拷贝<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">- 对于简单类型的数据来说，赋值就是深拷贝。</span><br><span class="line">对于复杂类型的数据（对象）来说，才要区分浅拷贝和深拷贝。</span><br><span class="line"></span><br><span class="line">2. 浅拷贝</span><br></pre></td></tr></table></figure></p>
<p>var a = {name: ‘frank’}<br>var b = a<br>b.name = ‘b’<br>a.name === ‘b’ //对 b 操作后，a 也变了<br><code>`</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/13/js里的数据类型转换/" data-id="cjptrq8ky000meh3qcvdnumb1" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-js里的数据类型" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2018/11/13/js里的数据类型/" class="article-date">
  <time datetime="2018-11-13T02:19:41.000Z" itemprop="datePublished">2018-11-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2018/11/13/js里的数据类型/">js里的数据类型</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="数据类型-7种"><a href="#数据类型-7种" class="headerlink" title="数据类型(7种)"></a>数据类型(7种)</h2><ol>
<li>数值(Number)</li>
</ol>
<ul>
<li>javaScript内部所有数字都是以<font color="red">64位浮点数</font>形式存储，即便整数也是如此。</li>
<li>数值的进制<ul>
<li>十进制： 没有前导0的数值，1+.1=1.1;1+1.1=1.1</li>
<li>八进值：有前缀0o或0O的数值</li>
<li>十六进制：有前缀0x或0X的数值</li>
<li>二进制：有前缀0b或0B的数值</li>
</ul>
</li>
<li>特殊数值–NaN<ul>
<li>非数字(not a number),主要出现在将字符串解析成数字出错的场合，数据类型依然是Number</li>
<li>0除以0会得到NaN</li>
<li>NaN不等于任何值，包括它本身</li>
<li>NaN与任何值（包括它本身）的运算，得到的都是NaN</li>
</ul>
</li>
</ul>
<ol start="2">
<li>字符串(string)</li>
</ol>
<ul>
<li>‘’（空字符串）和‘ ’（空格字符串）不一样，空字符串长度为0，空格字符串长度为1</li>
<li>若要在单引号内部使用单引号，就必须在内部的单引号前面加反斜杠\用来转义<ul>
<li><code>\&#39;</code>:单引号</li>
<li><code>\n</code>:回车</li>
<li><code>\t</code>:制表符 </li>
<li><code>\\</code>:一个反斜杠符号</li>
</ul>
</li>
<li>多行字符串的书写<ul>
<li>‘1234’+<br><br>‘5678’</li>
</ul>
</li>
<li>length属性</li>
</ul>
<p>返回字符串的长度，该属性是无法改变的</p>
<ul>
<li>base64转码<ul>
<li>btoa（）：任意值转为base64编码</li>
<li>atob（）：base64编码转为原来的值</li>
</ul>
</li>
</ul>
<ol start="3">
<li>布尔值(Boolean)</li>
</ol>
<ul>
<li>a&amp;&amp;b:a、b同时为真才为真</li>
<li>a||b：a、b同时为假才为假</li>
<li>如果JavaScript预期某个位置应该是布尔值，会将该位置上现有的值自动转化为布尔值</li>
</ul>
<ol start="4">
<li><p>symbol(一般不用)</p>
</li>
<li><p>null</p>
</li>
</ol>
<ul>
<li>表示空值，即该处的值现在为空</li>
</ul>
<ol start="6">
<li>undefined</li>
</ol>
<ul>
<li>表示未定义</li>
<li>区别：<ul>
<li>变量没有赋值，为undefined</li>
<li>object不想给值，就给null，非对象不想给值就给undefined</li>
<li>null表示空对象，undefined表示非空对象</li>
</ul>
</li>
</ul>
<ol start="7">
<li>对象(object)</li>
</ol>
<ul>
<li>对象是一种键值对的集合，是一种<font color="red">无序的符合数据集合</font></li>
<li><font color="blue">对象的所有键名都是字符串</font>，如果键名不符合标识名的条件，且不是数字，必须加上引号，否则会报错<ul>
<li>第一个字符必须是一个字母、下划线（_）或一个美元符号（$）</li>
<li>其他字符可以是字母、数字、下划线或者美元符号</li>
<li>中文是合法的标识符，可以用作变量名。</li>
</ul>
</li>
<li><p>空字符串也可以为键名</p>
</li>
<li><p>对象的引用</p>
<ul>
<li><p>obj[‘keyname’],必须加‘’<br></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var name=&apos;x&apos;</span><br><span class="line">var obj=&#123;</span><br><span class="line">    name:&apos;mm&apos;</span><br><span class="line">&#125;</span><br><span class="line">obj[name]==&gt;obj[&apos;x&apos;]==&gt;undefined</span><br></pre></td></tr></table></figure>
</li>
<li><p>obj.keyname(前提是keyname符合标识符命名规则)</p>
</li>
<li>数值键名必须使用方括号运算符引用</li>
</ul>
</li>
<li><p>属性的赋值</p>
</li>
</ul>
<p>点运算符和方括号运算符不仅可以读取值，也可以赋值</p>
<ul>
<li>属性的查看</li>
</ul>
<p>查看一个属性本身的所有方法，可以使用<code>Object.keys(obj)</code></p>
<ul>
<li><p>属性的删除</p>
<ul>
<li>delete命令用于删除对象的属性，删除成功后返回true:<br><br><code>delete  obj[&#39;keyname&#39;]</code>或<code>delete obj.keyname</code><br><br><em>delete把值和value都变成undefinde,而obj.keyundefined=undefined只是把value变成undefined，键名依然存在</em></li>
<li>删除一个不存在的属性，delete不会报错，并且返回true，只有当该属性存在，且不得删除时，才会返回false</li>
<li>delete命令只能删除对象本身的属性，无法删除继承的属性</li>
</ul>
</li>
<li><p>属性是否存在： in运算符</p>
<ul>
<li>in运算符用于检查对象是否包含某个属性（检查啊的是键名不是键值），如果包含就返回true，不包含返回false<br><br><code>‘keyname’ in obj</code><ul>
<li>in 运算符不能识别哪些对象是自身的 哪些是继承的</li>
</ul>
</li>
</ul>
</li>
<li><p>遍历：for…in循环</p>
<ul>
<li><p>for…in循环用来遍历一个对象的全部属性，跳过不可遍历的属性，不仅遍历自身属性，还遍历继承的属性,把原型链上可枚举的属性遍历出来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var person=&#123;</span><br><span class="line">    name:&apos;xxx&apos;,</span><br><span class="line">    age:18</span><br><span class="line">&#125;</span><br><span class="line">  for(var key in person)&#123;</span><br><span class="line">      console.log(key)</span><br><span class="line">  &#125;</span><br><span class="line">  //name age</span><br></pre></td></tr></table></figure>
<ul>
<li>Object.keys(obj)/Object.values(obj)<br><br>只遍历自身的可枚举属性</li>
<li>Object.getOwnPropertyDescriptor()<br><br>遍历自身的可枚举属性+不可枚举属性</li>
</ul>
</li>
</ul>
</li>
<li><p>typeof运算符</p>
</li>
</ul>
<p>返回一个值的数据类型,特殊的只有两种<br></p>
<ul>
<li><code>typeof null</code> //‘object’</li>
<li><code>typeof function</code> //‘function’</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/11/13/js里的数据类型/" data-id="cjptrq8l0000oeh3qd7bmdnvh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018/12/17/DOM事件模型/">DOM事件模型</a>
          </li>
        
          <li>
            <a href="/2018/12/17/JSONP/">JSONP</a>
          </li>
        
          <li>
            <a href="/2018/12/17/AJAX/">AJAX</a>
          </li>
        
          <li>
            <a href="/2018/11/27/for循环中的闭包/">for循环中的闭包</a>
          </li>
        
          <li>
            <a href="/2018/11/22/DOM/">DOM</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2018 莫正红<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>